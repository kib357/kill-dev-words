(this["webpackJsonpkill-dev-words"]=this["webpackJsonpkill-dev-words"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(17),r=n.n(o),s=(n(27),n(8)),c=n(2),l=(n(28),n(11));var d,u,m=function(e){var t=e.word,n=void 0===t?"":t,a=e.timestamp,i=e.pos,o=e.duration,r=e.isTyped,s=void 0===r?0:r,c=Math.floor(1e4*Math.random()),l=n,d=function(e){return l=e},u=function(){return s++};return{timestamp:a,pos:i,id:c,getWord:function(){return l},getTyped:function(){return s},setTyped:u,duration:o,setWord:d,isKilled:function(){return l.length===s}}};function f(e){return e.find((function(e){return e.getTyped()}))}function j(e,t){var n=e.timestamp+e.duration,a=t.timestamp+t.duration;return n<a?-1:n===a?0:1}function v(e){return e.isKilled()}!function(e){e[e.MAIN=0]="MAIN",e[e.REGISTRATION=1]="REGISTRATION",e[e.GAME=2]="GAME",e[e.LEADERBOARD=3]="LEADERBOARD"}(d||(d={})),function(e){e[e.PLAY=0]="PLAY",e[e.SCORE=1]="SCORE"}(u||(u={}));var b=function(e){var t=e.duration,n=void 0===t?3e4:t,a=e.WORDS,i=void 0===a?[]:a,o=e.PLAYER_OFFSET,r=Date.now(),s=0,c=u.PLAY,d=0,b=0,p=function(e){var t=e.getWord().length;b+=123*t,d+=100},h=[],O=[],g=0,x=function(e){return Math.floor(3500+e.length*(2200+600*Math.random()))*(d?1-d/2400*.6:1)},y=function(){var e=Date.now();if(g<=e){g=function(){var e=Date.now(),t=Math.floor(2e3+2e3*Math.random());return e+t}();var t=function(){var e=Math.floor(Math.random()*(null===i||void 0===i?void 0:i.length));return i[e]}();O=[].concat(Object(l.a)(O),[m({word:t,pos:Math.floor(100*Math.random()),timestamp:Date.now(),duration:x(t)})])}},S=function(){var e=Date.now();return r+n<=e},E=function(){return d/100},N=function(){return Date.now()-r},w=function(e){var t=document.getElementById("particles")||{},n=(t.clientWidth,t.clientHeight),a=void 0===n?0:n,i=Date.now(),r=e.pos,s=e.duration,c=1-(s-(s-(i-e.timestamp+180)))/s,d=r/100,u=0,m={x:d+(.5-d)*(1-c),y:u+((a-o)/a-u)*(1-c)},f={timestamp:Date.now(),key:String(1e4*Math.random()),destination:m,duration:180};h=[].concat(Object(l.a)(h),[f])},I=function(){return h};return{onKeydown:function(e){var t=e.code.toLowerCase().replace("key",""),n=Object(l.a)(O),a=f(n);if(!a){var i=function(e,t){return e.sort(j).find((function(e){return 0===(0,e.getWord)().indexOf(t)}))||null}(O,t);return null===i||void 0===i||i.setTyped(),O=n,i&&w(i),i}return a.getWord()[null===a||void 0===a?void 0:a.getTyped()]===t?(a.setTyped(),O=n,w(a),a):null},getState:function(){return{state:c,score:b,getKilledWordCount:E,game_duration:s,words:O,getParticles:I,start_timestamp:r,current:f(O)}},tick:function(){var e,t=function(e){var t=e.find(v);return{score:Boolean(t),killed:t}}(O),a=t.score,i=t.killed;a&&i&&p(i),function(e){var t=function(e){var t=e.duration;return e.timestamp+t<=Date.now()};return Boolean(e.find(t))}(O)||S()?(e=S(),c=u.SCORE,s=e?n:N()):(O=function(e){return e.filter((function(e){return!v(e)}))}(O),y()),function(){var e=!1,t=Date.now(),n=h.filter((function(n){return!(n.timestamp+n.duration<t)||(e=!0,!1)}));e&&(h=n)}()}}},p=n(16),h=n(18),O=n(19),g=n(21),x=n(22),y=n.p+"static/media/desktop-mini.e1b74462.png",S=n(0);var E,N=function(e){var t=e.multiplier,n=void 0===t?1.18:t;return Object(a.useEffect)((function(){var e=window.devicePixelRatio||1,t=document.getElementById("desktop");t.width=t.clientWidth*e,t.height=t.clientHeight*e;var a=t.getContext("2d");if(a){a.scale(e,e);var i=new Image;i.src=y,i.onload=function(){var o=i.width*n,r=i.height*n,s=t.width/e/2-o/2,c=t.height/e/2-r/2;a.drawImage(i,s,c,o,r)}}}),[]),Object(S.jsx)("canvas",{id:"desktop",className:"desktop"})};function w(e){return Math.floor(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var I=i.a.memo((function(e){var t=e.value,n=void 0===t?0:t;return Object(S.jsx)(O.a,{decimals:0,speed:1e3,ease:"cubicIn",value:n,customFunctionRender:w},"score")}));function k(e){var t=e.destination,n=e.duration,a=e.key,i=document.getElementById("particles")||{offsetHeight:1,offsetWidth:1},o=i.offsetHeight,r=i.offsetWidth,s=T(t.x,0,1,-r/2,r/2),c=T(t.y,0,1,-o,0),l=Object(g.a)(E||(E=Object(h.a)(["\n  from, {\n    transform: translate3d(0, 0, 0);\n  }\n\n  to {\n    transform: translate3d(","px, ","px,0);\n  }\n"])),s,c);return Object(S.jsx)("div",{className:Object(x.a)({animation:"".concat(l," ").concat(n,"ms ease infinite"),position:"absolute",bottom:"calc(45px - (9px / 2))",left:"calc(50% - (9px / 2))",transform:"translate(0, 0)",width:"9px",height:"9px",background:"white",animationTimingFunction:"steps(".concat(Math.floor(n/30),", end)")})},a)}function T(e,t,n,a,i){return a+(i-a)*(e-t)/(n-t)}function R(e){return String(e).padStart(2,"0")}function A(e){var t=e.state,n=e.duration;return Object(S.jsx)("div",{className:"gameover eightBit",children:t.game_duration===n?"TIME IS UP":"GAME OVER"})}var M=function(e){var t=localStorage.getItem("player-id")||String(Math.floor(1e5*Math.random())),n=localStorage.getItem("player"),o=i.a.useState(!1),r=Object(c.a)(o,2),l=r[0],d=r[1],m=e.state,f=e.tickId,j=e.duration,v=e.FPS,b=e.onLeaderboard,p=i.a.useMemo((function(){return null===m||void 0===m?void 0:m.words.map((function(e){var t=e.duration,n=e.getWord(),a=n.substr(0,e.getTyped()),i=a?n.substr(e.getTyped(),1):null,o=n.substr(a?e.getTyped()+1:e.getTyped()),r=Math.floor(t/90);return Object(S.jsxs)("div",{className:"word toEnd eightBit",style:{zIndex:i?2:1,left:e.pos+"%",transitionDuration:"".concat(t,"ms"),animationDuration:"".concat(t,"ms"),animationTimingFunction:"steps(".concat(r,", end)"),transitionTimingFunction:"steps(".concat(r,", end)")},children:[Object(S.jsx)("span",{className:"outlined_inverted",children:a}),i?Object(S.jsx)("span",{className:"cursor",children:i}):null,Object(S.jsx)("span",{children:o})]},e.id)}))}),[(null===m||void 0===m?void 0:m.words)||[]]),h=(null===m||void 0===m?void 0:m.getParticles())||[],O=i.a.useMemo((function(){return h.map((function(e){return Object(S.jsx)(k,Object(s.a)({},e))}))}),[h||[]]),g=(m||{}).start_timestamp,x=function(e){var t=e.start_timestamp,n=e.duration,a=e.tickId-t,i=function(e){var t,n,a;return a=Math.floor(e/1e3),n=Math.floor(a/60),a%=60,t=Math.floor(n/60),n%=60,{day:Math.floor(t/24),hour:t%=24,minute:n,seconds:a}}(Math.max(n-a,0)),o="".concat(R(i.minute),":").concat(R(i.seconds)),r=Math.min(a,n)/n;return[o,r]}({start_timestamp:void 0===g?0:g,duration:j,tickId:f}),y=Object(c.a)(x,2),E=y[0],M=y[1];return Object(a.useEffect)((function(){var e,a;return(null===m||void 0===m?void 0:m.state)===u.SCORE&&(e=setTimeout((function(){if(d(!0),n){var e=JSON.parse(localStorage.getItem("leaderboard")||"[]"),i={id:t,name:n,score:m.score,contact:localStorage.getItem("contact")||""},o=function(e){return e===t};e.find((function(e){var t=e.id;return o(t)}))?e=e.map((function(e){return o(e.id)&&e.score<m.score&&(e.score=m.score),e})):e.push(i),localStorage.setItem("leaderboard",JSON.stringify(e)),a=setTimeout((function(){b({id:t,deadline:E,score:m.score})}),1500)}else a=setTimeout((function(){b({deadline:E,score:m.score})}),1500)}),3e3)),function(){clearTimeout(e),clearTimeout(a)}}),[null===m||void 0===m?void 0:m.state]),Object(S.jsxs)("div",{className:"game ".concat(l?"leaderboard":null),children:[Object(S.jsx)("div",{className:"deadline",children:Object(S.jsxs)("div",{className:"deadline-container",style:{position:"absolute",bottom:"36px",left:"36px",willChange:"transform",transition:"transform ".concat(Math.floor(1100/v),"ms linear"),transform:"translate3d(0,".concat(Math.floor(T(M,0,1,-978,0)),"px,0)")},children:[Object(S.jsxs)("div",{className:"label",children:[Object(S.jsx)("span",{className:"outlined",children:"DEADLINE"}),Object(S.jsxs)("span",{className:"countdown",style:{marginLeft:"0.2em"},children:["\xa0",E]})]}),Object(S.jsxs)("div",{className:"score-in-deadline",children:[Object(S.jsx)("span",{className:"outlined",children:"SCORE"}),Object(S.jsx)("span",{style:{marginLeft:"1.9em"},children:w((null===m||void 0===m?void 0:m.score)||0)})]})]})}),Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("div",{className:"logo"}),Object(S.jsxs)("div",{className:"viewport",children:[(null===m||void 0===m?void 0:m.state)===u.SCORE?Object(S.jsx)(A,{duration:j,state:m}):null,(null===m||void 0===m?void 0:m.state)===u.PLAY?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"words",children:p}),Object(S.jsx)("div",{className:"particles",id:"particles",children:O})]}):null,Object(S.jsx)("canvas",{style:{width:"100%",height:"100%"},id:"fireworks"}),Object(S.jsx)("div",{className:"player"})]}),Object(S.jsx)(N,{})]}),Object(S.jsxs)("div",{className:"sidebar",children:[Object(S.jsxs)("div",{className:"score",children:[Object(S.jsx)("span",{className:"outlined",children:"SCORE"}),Object(S.jsxs)("span",{style:{marginLeft:"0.2em",minWidth:"4em",display:"inline-block"},children:["\xa0",Object(S.jsx)(I,{value:null===m||void 0===m?void 0:m.score},"score-wrapper")]})]}),Object(S.jsx)("div",{style:{opacity:0},className:"typed-char outlined",children:"T"})]})]})};var L=function(e){var t,n=e.id,o=e.deadline,r=e.onHome,s=e.score,l=Object(a.useState)(!1),d=Object(c.a)(l,2),u=d[0],m=d[1],f=Object(a.useState)(JSON.parse(localStorage.getItem("leaderboard")||"[]").sort((function(e,t){return t.score-e.score}))),j=Object(c.a)(f,1)[0],v=(null===(t=j.find((function(e){return e.id===n})))||void 0===t?void 0:t.score)||0,b=Date.now(),p=i.a.useCallback((function(e){Date.now()-b>6e3&&"Enter"===e.code&&r(),e.preventDefault(),e.stopPropagation()}),[]);return Object(a.useEffect)((function(){document.addEventListener("keydown",p);var e=setTimeout((function(){var e,t;n&&(null===(e=document)||void 0===e||null===(t=e.getElementById("you"))||void 0===t||t.scrollIntoView({block:"center",behavior:"smooth"}))}),4e3),t=setTimeout((function(){m(!0)}),6e3);return function(){clearTimeout(e),clearTimeout(t),document.removeEventListener("keydown",p)}}),[]),Object(S.jsxs)("div",{className:"leaderboard",children:[o?Object(S.jsxs)("div",{className:"deadline",children:["DEADLINE"," ",Object(S.jsx)("span",{className:"outlined",style:{marginLeft:"0.2em"},children:o})]}):null,s||v?Object(S.jsxs)("div",{className:"score",children:[Object(S.jsx)("span",{className:"outlined",children:"SCORE"}),Object(S.jsx)("span",{style:{marginLeft:"1.9em"},children:w(s||v)})]}):null,Object(S.jsx)("div",{className:"board",children:j.map((function(e,t){var a=e.id,i=e.name,o=e.score;return Object(S.jsxs)("div",{children:[Object(S.jsxs)("span",{id:a===n?"you":void 0,className:a===n?"":"outlined",children:[t+1,".",Object(S.jsx)("span",{style:{marginLeft:"0.5em",maxWidth:"1000px",textOverflow:"ellipsis",overflowX:"hidden",display:"inline-block",verticalAlign:"bottom"},children:i})]}),Object(S.jsx)("span",{style:{marginLeft:"0.5em"},children:w(o)})]})}))}),Object(S.jsx)("div",{onClick:r,style:{opacity:u?1:0},className:"button eightBit",children:"Return home"})]})},C=n.p+"static/media/title.20631e3e.png";var D=function(e){var t=e.onScreenChange,n=e.onLeaderboard,i=Object(a.useState)(0),o=Object(c.a)(i,2),r=o[0],s=o[1],l=Object(a.useState)(!1),u=Object(c.a)(l,2),m=u[0],f=u[1],j=function(e){return function(){s(e)}},v=function(){0===r?(f(!0),setTimeout((function(){localStorage.removeItem("skip-registration"),t(d.REGISTRATION)}),810)):1===r?(f(!0),setTimeout((function(){localStorage.setItem("skip-registration","true"),localStorage.removeItem("player"),localStorage.removeItem("contact"),t(d.REGISTRATION)}),810)):2===r&&n({})};return Object(S.jsx)("div",{className:"main-screen ".concat(m?"to-registration":null),children:Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("div",{className:"logo"}),Object(S.jsx)("img",{width:"737",style:{margin:"70px auto",display:m?"none":"block"},src:C,className:"title"}),Object(S.jsx)("ul",{className:"menu eightBit",style:{display:m?"none":void 0},children:["START CHALLENGE","PRACTICE","LEADERBOARDS"].map((function(e,t){return Object(S.jsx)("li",{onClick:v,onMouseEnter:j(t),className:r===t?"active":void 0,children:e})}))}),Object(S.jsx)(N,{multiplier:1})]})})};var B=function(e){var t,n=e.onScreenChange;!function(e){e[e.REGISTRATION=0]="REGISTRATION",e[e["HOW-TO"]=1]="HOW-TO"}(t||(t={}));var i=localStorage.getItem("skip-registration"),o=Object(a.useState)(i?t["HOW-TO"]:t.REGISTRATION),r=Object(c.a)(o,2),s=r[0],l=r[1],u=Object(a.useState)(""),m=Object(c.a)(u,2),f=m[0],j=m[1],v=Object(a.useState)(""),b=Object(c.a)(v,2),p=b[0],h=b[1];return Object(a.useEffect)((function(){var e;return s===t["HOW-TO"]&&(e=setTimeout((function(){n(d.GAME)}),9e3)),function(){clearTimeout(e)}}),[s]),Object(S.jsxs)("div",{className:"registration",children:[Object(S.jsx)(N,{}),Object(S.jsx)("div",{className:"logo"}),s===t.REGISTRATION?Object(S.jsxs)("div",{className:"registration-step",children:[Object(S.jsx)("div",{className:"text eightBit",children:"\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u043c\u044b \u0441\u0432\u044f\u0437\u0430\u043b\u0438\u0441\u044c \u0441\xa0\u0432\u0430\u043c\u0438 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u043e\u0431\u0435\u0434\u044b"}),Object(S.jsx)("div",{children:Object(S.jsxs)("label",{className:"eightBit",htmlFor:"player",children:["\u0418\u041c\u042f",Object(S.jsx)("input",{type:"text",name:"player",autoComplete:"chrome-off",className:"eightBit",id:"player",value:f,onChange:function(e){return j(e.target.value)}})]})}),Object(S.jsx)("div",{style:{paddingTop:"30px"},children:Object(S.jsxs)("label",{className:"eightBit",htmlFor:"contact",children:["\u0422\u0415\u041b\u0415\u0424\u041e\u041d \u0418\u041b\u0418 \u0422\u0415\u041b\u0415\u0413\u0420\u0410\u041c",Object(S.jsx)("input",{type:"text",name:"contact",autoComplete:"chrome-off",id:"contact",className:"eightBit",value:p,onChange:function(e){return h(e.target.value)}})]})}),Object(S.jsx)("div",{children:Object(S.jsx)("div",{onClick:function(){if(f&&p){var e=JSON.parse(localStorage.getItem("leaderboard")||"[]").find((function(e){var t=e.name,n=e.contact;return t===f&&n===p}));localStorage.setItem("player-id",(null===e||void 0===e?void 0:e.id)||String(Math.floor(1e5*Math.random()))),localStorage.setItem("player",f),localStorage.setItem("contact",p),l(t["HOW-TO"])}},style:{opacity:f&&p?1:.6},className:"button eightBit",children:"Register"})})]}):null,s===t["HOW-TO"]?Object(S.jsxs)("div",{className:"how-to",children:[Object(S.jsxs)("div",{className:"rules eightBit",children:[Object(S.jsx)("h1",{children:"\u041f\u0420\u0410\u0412\u0418\u041b\u0410"}),Object(S.jsx)("p",{children:"\u043f\u0435\u0447\u0430\u0442\u0430\u0439\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0432\u044b\u0431\u0438\u0432\u0430\u0442\u044c \u0441\u043b\u043e\u0432\u0430"}),Object(S.jsxs)("p",{children:["\u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c ",i?"30 \u0441\u0435\u043a\u0443\u043d\u0434":"2 \u043c\u0438\u043d\u0443\u0442\u044b",", \u0447\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0441\u044f \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438"]})]}),Object(S.jsx)("div",{"data-progress":"20%","data-content":"Loading...",className:"eightBit loading inverted-bar"})]}):null]})},W=function(){var e={1:"nil lib go pen var if add zsh run php bug fix api key add all id em erb rem px ux ui svg for box git xml rtc pre rgb hsl rel web js def moz end to dev css".split(" "),2:"void null code scss bash else push edge ruby pull tidy head body foot haml slim jade true html color top span left right save fork flex none bold auto href link size ease fill path rgba hsla from skew sort font size team sass hash json less attr text data".split(" "),3:"react ember event width height clone gulp concat fetch valid aside style elsif babel jquery param start assign posts logos chrome blogs block align xcode slack class agile xmlns origin comma scrum stroke scale false rails".split(" "),4:"inline method deploy target assign window grunt commit minify jekyll stylus article import tweets google opacity weight bottom scroll italic profile hidden github keytrap editor webkit string number integer decimal period jsconf".split(" "),5:"inherit function includes bourbon normalize angular explorer section ternary twitter overflow absolute postcss invalid viewbox content sublime session display background compile bracket backbone boolean codepen dreamhire contains standup".split(" "),6:"chriscoyier javascript cssdevconf customers autoprefixer stackoverflow visibility headphones underscore bootstrap csstricks typescript livescript customer settings semicolon attribute parenthesis markdown compiler responsive preprocessor webdesign developer development".split(" "),authors:"gary petr anna sergey manychat".split(" ")};return Object.values(e).flat()}(),P=12e4;var G=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(P),l=Object(c.a)(r,2),m=l[0],f=l[1],j=Object(a.useState)(d.MAIN),v=Object(c.a)(j,2),h=v[0],O=v[1],g=function(e){return O(e)},x=Object(a.useState)(null),y=Object(c.a)(x,2),E=y[0],N=y[1],w=Object(a.useState)(0),I=Object(c.a)(w,2),k=I[0],T=I[1],R=Object(a.useState)(null),A=Object(c.a)(R,2),C=A[0],G=A[1],F=Object(a.useState)(null),H=Object(c.a)(F,2),Y=H[0],_=H[1],z=i.a.useCallback((function(e){var t,n=e.key,a=e.code;if((null===(t=Y)||void 0===t?void 0:t.getState().state)===u.PLAY){var i,o=null===(i=Y)||void 0===i?void 0:i.onKeydown({key:n,code:a});o?o.isKilled()&&function(e){var t=document.getElementById("fireworks"),n=t?p.a.create(t,{resize:!0}):p.a,a=Date.now(),i=e.pos,o=e.duration,r=1-(o-(o-(a-e.timestamp)))/o;if(t){var s={x:i/100,y:0},c={x:.5,y:(t.clientHeight-65)/t.clientHeight},l={x:s.x+(c.x-s.x)*(1-r),y:s.y+(c.y-s.y)*(1-r)};n({particleCount:5+10*Math.random(),spread:220,startVelocity:10,ticks:35,gravity:.5,colors:["#ffffff"],shapes:["square"],origin:{x:l.x,y:l.y}})}else n({particleCount:10,spread:220,startVelocity:10,ticks:40,gravity:.4,colors:["#ffffff"],shapes:["square"],origin:{x:Math.random(),y:Math.random()-.2}})}(o):console.log("miss")}}),[Y]),J=function(e){o(e),document.removeEventListener("keydown",z),Y=null,O(d.LEADERBOARD)};return Object(a.useEffect)((function(){h===d.GAME&&(localStorage.getItem("skip-registration")?(f(3e4),_(b({WORDS:W,PLAYER_OFFSET:65,duration:3e4}))):(f(P),_(b({WORDS:W,PLAYER_OFFSET:65,duration:P}))))}),[h]),Object(a.useEffect)((function(){var e;if(Y){document.addEventListener("keydown",z);var t=function(){Y.tick(),G(Y.getState()),T(Date.now())};t(),e=setInterval(t,1e3/30),N(e)}return function(){clearInterval(e),document.removeEventListener("keydown",z)}}),[Y]),Object(a.useEffect)((function(){(null===C||void 0===C?void 0:C.state)===u.SCORE?(console.log("SCORE SCREEN"),E&&clearInterval(E),N(null)):(null===C||void 0===C?void 0:C.state)===u.PLAY&&console.log("PLAY SCREEN")}),[null===C||void 0===C?void 0:C.state]),Object(S.jsxs)("div",{className:"App",children:[h===d.MAIN?Object(S.jsx)(D,{onLeaderboard:J,onScreenChange:g}):null,h===d.REGISTRATION?Object(S.jsx)(B,{onScreenChange:g}):null,h===d.GAME?Object(S.jsx)(M,{FPS:30,duration:m,tickId:k,state:C,onLeaderboard:J}):null,h===d.LEADERBOARD?Object(S.jsx)(L,Object(s.a)(Object(s.a)({},n),{},{onHome:function(){g(d.MAIN)}})):null]})};r.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(G,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.c76131ef.chunk.js.map